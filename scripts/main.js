const proyectos = [
    {
        titulo: "Software para automatizar el proceso de desembolso de préstamos comerciales y financiamientos COMEX",
        descripcion: "Proyecto desarrollado en colaboración con un equipo para el diseño e implemntación de un sistema que permite gestionar de forma integral la creación de expedientes, validación de documentación, registro y aprobación de desembolsos, confirmación de garantías y control documentario. <br> Mi aporte se centró en la creación de interfaces web en ASP.NET Web Forms, implementando formularios con validaciones en tiempo real, consumo de Web Services SOAP, manejo de estado de la aplicación y vinculación dinámica de datos para una experiencia de usuario fluida y eficiente.",
        imagen: "images/proyectos/proyecto-1/galeria-0.webp",
        tieneLink: false,
        link: "",
        tecnologias: [
            {
                nombre: "HTML",
                alt: "logo de html",
                url: "images/tecnologias/html.svg"
            },
            {
                nombre: "Bootstrap",
                alt: "logo de Bootstrap",
                url: "images/tecnologias/bootstrap.svg"
            },
            {
                nombre: "C#",
                alt: "logo de C#",
                url: "images/tecnologias/c-sharp.svg"
            },
            {
                nombre: "Java",
                alt: "logo de java",
                url: "images/tecnologias/java.svg"
            },
            {
                nombre: "MySQL",
                alt: "logo de MySQL",
                url: "images/tecnologias/mysql.svg"
            },
        ],
        capturas: [
            "images/proyectos/proyecto-1/galeria-1.webp",
            "images/proyectos/proyecto-1/galeria-2.webp",
            "images/proyectos/proyecto-1/galeria-3.webp",
            "images/proyectos/proyecto-1/galeria-4.webp",
            "images/proyectos/proyecto-1/galeria-5.webp",
            "images/proyectos/proyecto-1/galeria-6.webp",
        ]

    },
    {
        titulo: "Sistema de apoyo a los procesos administrativos de especialidades",
        descripcion: "Proyecto desarrollado en colaboración con un equipo para el diseño e implementación de un sistema que automatiza y gestiona los procesos administrativos de las especialidades universitarias, reemplazando flujos de trabajo tradicionales basados en correo electrónico. <br> El proyecto se desarrolló bajo la metodología Scrum, trabajando con historias de usuario, donde cada integrante fue responsable del desarrollo frontend y backend de sus funcionalidades, logrando una mejora significativa en la eficiencia operativa y la experiencia del usuario.",
        imagen: "images/proyectos/proyecto-2/galeria-0.webp",
        tieneLink: false,
        link: "",
        tecnologias: [
            {
                nombre: "React",
                alt: "logo de React",
                url: "images/tecnologias/react.svg"
            },
            {
                nombre: "Spring Boot",
                alt: "logo de Spring Boot",
                url: "images/tecnologias/spring-boot.svg"
            },
            {
                nombre: "MySQL",
                alt: "logo de MySQL",
                url: "images/tecnologias/mysql.svg"
            }
        ],
        capturas: [
            "images/proyectos/proyecto-2/galeria-1.webp",
            "images/proyectos/proyecto-2/galeria-2.webp",
            "images/proyectos/proyecto-2/galeria-3.webp",
            "images/proyectos/proyecto-2/galeria-4.webp",
            "images/proyectos/proyecto-2/galeria-5.webp",
            "images/proyectos/proyecto-2/galeria-6.webp",
            "images/proyectos/proyecto-2/galeria-7.webp",
            "images/proyectos/proyecto-2/galeria-8.webp",
            "images/proyectos/proyecto-2/galeria-9.webp"
        ]

    },
    {
        titulo: "Sistema para gestión de pedidos de restaurante",
        descripcion: "Proyecto desarrollado en colaboración con un equipo para el diseño e implementación de un sistema de gestión para un restaurante, enfocado en la digitalización de la atención y la mejora de la experiencia del cliente. El sistema permite la visualización de una carta digital interactiva, la personalización de pedidos y el cálculo automático del monto, optimizando los procesos operativos. <br> Mi participación se centró en el diseño e implementación del frontend de la carta digital, habilitando la visualización de menús, la personalización de productos con especificaciones y adicionales, y el cálculo dinámico del monto total. Además, optimicé la carga de imágenes para mejorar el rendimiento y la experiencia de usuario.",
        imagen: "images/proyectos/proyecto-3/galeria-0.webp",
        tieneLink: false,
        link: "",
        tecnologias: [
            {
                nombre: "Next.js",
                alt: "logo de next.js",
                url: "images/tecnologias/next-js.svg"
            },
            {
                nombre: "Python",
                alt: "logo de python",
                url: "images/tecnologias/python.svg"
            },
            {
                nombre: "MySQL",
                alt: "logo de MySQL",
                url: "images/tecnologias/mysql.svg"
            }
        ],
        capturas: [
            "images/proyectos/proyecto-3/galeria-1.webp",
            "images/proyectos/proyecto-3/galeria-2.webp",
            "images/proyectos/proyecto-3/galeria-3.webp",
            "images/proyectos/proyecto-3/galeria-4.webp",
        ]

    },
    {
        titulo: "Sistema de optimización logística de GLP",
        descripcion: "Proyecto desarrollado en colaboración con un equipo para el diseño e implementación de un sistema de optimización de rutas de distribución mediante algoritmos metaheurísticos, reduciendo costos operativos y asegurando entregas en menos de 4 horas. <br> Se implementó un panel de monitoreo en tiempo real para la gestión de incidentes, bloqueos viales y la simulación de escenarios críticos.",
        imagen: "images/proyectos/proyecto-4/galeria-0.webp",
        tieneLink: false,
        link: "",
        tecnologias: [
            {
                nombre: "Next.js",
                alt: "logo de Next.js",
                url: "images/tecnologias/next-js.svg"
            },
            {
                nombre: "Spring Boot",
                alt: "logo de Spring Boot",
                url: "images/tecnologias/spring-boot.svg"
            },
            {
                nombre: "MySQL",
                alt: "logo de MySQL",
                url: "images/tecnologias/mysql.svg"
            },
        ],
        capturas: [
            "images/proyectos/proyecto-4/galeria-1.webp",
            "images/proyectos/proyecto-4/galeria-2.webp",
            "images/proyectos/proyecto-4/galeria-3.webp",
            "images/proyectos/proyecto-4/galeria-4.webp",


        ]
    },
    {
        titulo: "Aplicación móvil gamificada para el fomento de la actividad física entre universitarios peruanos",
        descripcion: "Proyecto individual desarrollado como tesis para el diseño e implementación de una aplicación móvil Android dirigida a estudiantes universitarios peruanos con altos niveles de sedentarismo. La aplicación utiliza elementos de gamificación como puntos, insignias, rankings y desafíos personalizados para motivar la actividad física y promover hábitos saludables sostenibles. El proyecto aborda una problemática real del contexto peruano mediante una solución tecnológica culturalmente relevante, basada en teorías motivacionales.",
        imagen: "images/proyectos/proyecto-5/galeria-0.webp",
        tieneLink: false,
        link: "https://github.com/eduardohv88/appGamificada.git",
        tecnologias: [
            {
                nombre: "Flutterflow",
                alt: "logo de flutterflow",
                url: "images/tecnologias/flutterFlow.svg"
            },
            {
                nombre: "Flutter",
                alt: "logo de flutter",
                url: "images/tecnologias/flutter.svg"
            },
            {
                nombre: "Firebase",
                alt: "logo de firebase",
                url: "images/tecnologias/firebase.svg"
            },
        ],
        capturas: [
            "images/proyectos/proyecto-5/galeria-1.webp",
            "images/proyectos/proyecto-5/galeria-2.webp",
            "images/proyectos/proyecto-5/galeria-3.webp",
            "images/proyectos/proyecto-5/galeria-4.webp",
            "images/proyectos/proyecto-5/galeria-5.webp",
            "images/proyectos/proyecto-5/galeria-6.webp",
            "images/proyectos/proyecto-5/galeria-7.webp",
            "images/proyectos/proyecto-5/galeria-8.webp",
            "images/proyectos/proyecto-5/galeria-9.webp",
            "images/proyectos/proyecto-5/galeria-10.webp",
            "images/proyectos/proyecto-5/galeria-11.webp",
            "images/proyectos/proyecto-5/galeria-12.webp",
            "images/proyectos/proyecto-5/galeria-13.webp",
            "images/proyectos/proyecto-5/galeria-14.webp",
        ]
    }
]

const educacion = [
    {
        fecha: "2019-Actualidad",
        descripcion: "Pontificia Universidad Católica del Perú, Alumno de 8 Ciclo en Ingeniería Informática.",
    },
    {
        fecha: "Diciembre 2023",
        descripcion: "Fundación Telefónica,<br> PE Programación con javaScript. <br> 40 horas",
    },
    {
        fecha: "Diciembre 2024",
        descripcion: "Cursea,<br> Habilidades de Excel para los negocios: Conceptos esenciales. <br> 26 horas",
    },
    {
        fecha: "Diciembre 2024",
        descripcion: "Cursea,<br> Habilidades de Excel para los negocios: Intermedio I. <br> 27 horas",
    },
]


const skills = [
    {
        tipo: "Frontend",
        tecnologias: [
            {
                nombre: "React",
                alt: "logo de React",
                url: "images/tecnologias/react.svg"
            },
            {
                nombre: "Angular",
                alt: "logo de Angular",
                url: "images/tecnologias/angular.svg"
            },
            {
                nombre: "HTML",
                alt: "logo de HTML",
                url: "images/tecnologias/html.svg"
            },
            {
                nombre: "CSS",
                alt: "logo de CSS",
                url: "images/tecnologias/css.svg"
            },
            {
                nombre: "JavaScript",
                alt: "logo de JavaScript",
                url: "images/tecnologias/javaScript.svg"
            },
            {
                nombre: "Bootstrap",
                alt: "logo de Bootstrap",
                url: "images/tecnologias/bootstrap.svg"
            },
        ]
    },
    {
        tipo: "Backend",
        tecnologias: [
            {
                nombre: "Java",
                alt: "logo de java",
                url: "images/tecnologias/java.svg"
            },
            {
                nombre: "C#",
                alt: "logo de C#",
                url: "images/tecnologias/c-sharp.svg"
            },
            {
                nombre: "Spring Boot",
                alt: "logo de Spring Boot",
                url: "images/tecnologias/spring-boot.svg"
            },
        ]
    },
    {
        tipo: "Base de datos",
        tecnologias: [
            {
                nombre: "MySQL",
                alt: "logo de MySQL",
                url: "images/tecnologias/mysql.svg"
            },
            {
                nombre: "Cloud Firestore",
                alt: "logo de firestore",
                url: "images/tecnologias/firestore.svg"
            }
        ]
    },
    {
        tipo: "Herramientas",
        tecnologias: [
            {
                nombre: "Git",
                alt: "logo de Git",
                url: "images/tecnologias/git.svg"
            },
            {
                nombre: "GitHub",
                alt: "logo de GitHub",
                url: "images/tecnologias/gitHub.svg"
            },
            {
                nombre: "GitLab",
                alt: "logo de GitLab",
                url: "images/tecnologias/gitLab.svg"
            },
            {
                nombre: "Postman",
                alt: "logo de Postman",
                url: "images/tecnologias/postman.svg"
            },
            {
                nombre: "Figma",
                alt: "logo de Figma",
                url: "images/tecnologias/figma.svg"
            }
        ]
    },
    {
        tipo: "Desarrollo movil",
        tecnologias: [
            {
                nombre: "Flutter",
                alt: "logo de Flutetr",
                url: "images/tecnologias/flutter.svg"
            },
            {
                nombre: "Flutterflow",
                alt: "logo de Flutterflow",
                url: "images/tecnologias/flutterFlow.svg"
            },
        ]
    },

]

const experience = [
    {
        empresa: "Data Science Research Perú",
        puesto: "Desarrollador Frontend",
        imagen: "images/experiencia/dataScience.webp",
        periodo: "enero 2025 - marzo 2025; julio 2025 - septiembre 2025",
        tareas: [
            "Desarrollé interfaces web para una plataforma educativa EdTech utilizando Angular 10, HTML5, SCSS y Bootstrap, a partir de prototipos en Figma.",
            "Implementé landing pages orientadas a marketing y captación de leads, asegurando fidelidad visual, tiempos de carga óptimos y diseño responsive para web y mobile.",
            "Integré APIs REST del backend para la gestión y visualización de datos de alumnos y cursos, incorporando información dinámica en el frontend.",
            "Construí módulos de autogestión de contenido para el panel administrativo, permitiendo la actualización de banners, cursos y configuraciones sin intervención técnica.",
            "Optimicé la responsividad y usabilidad de páginas existentes mediante refactorización de estilos y aplicación de enfoques mobile-first.",
            "Colaboré estrechamente con equipos de Diseño, Marketing y Backend bajo una metodología ágil y entorno de trabajo remoto.",
            "Gestioné el código fuente mediante Git y GitLab, participando en revisiones de código e integración continua."
        ]
    }
]

const sectionSkills = document.getElementById("section-skills");
const fragment = document.createDocumentFragment(); //Objeto ligero del DOM y sirve como contenedor temporal de nodos

skills.forEach(skill => {
    const article = document.createElement("article");
    article.classList.add("skill-card");

    const h3 = document.createElement("h3");
    h3.classList.add("skill-card__title");
    h3.textContent = skill.tipo;


    const div = document.createElement("div");
    div.classList.add("skill-card__items");


    skill.tecnologias.forEach(tecnologia => {
        const item = document.createElement("div");
        item.classList.add("skill-card__item");

        const img = document.createElement("img");
        img.classList.add("skill-card__logo");
        img.src = tecnologia.url;
        img.alt = tecnologia.alt;
        img.loading = "lazy";

        const name = document.createElement("h6");
        name.classList.add("skill-card__text");
        name.textContent = tecnologia.nombre;
        item.append(img, name); //append agrega varios nodos a la vez
        div.appendChild(item);
    })

    article.append(h3, div);
    fragment.appendChild(article); //aqui crea la estructura y no afecta el DOM
})

sectionSkills.appendChild(fragment); // aqui finalmente agregamos al DOM y solo una vez



/*
const contenedorEducacion = document.getElementById("lista-educacion");
educacion.forEach(educacion => {
    const contenedorItem = document.createElement("div");
    contenedorItem.classList.add("linea-tiempo__item");

    contenedorEducacion.appendChild(contenedorItem);

    const itemCirculo = document.createElement("span");
    itemCirculo.classList.add("item__circulo");
    contenedorItem.appendChild(itemCirculo);

    const itemContenido = document.createElement("div");
    itemContenido.classList.add("item__contenido");
    contenedorItem.appendChild(itemContenido);

    const fecha = document.createElement("h6");
    fecha.classList.add("item__fecha");
    fecha.textContent = educacion.fecha;
    itemContenido.appendChild(fecha);

    const descripcion = document.createElement("p");
    descripcion.classList.add("item__descripcion");
    descripcion.innerHTML = educacion.descripcion;
    itemContenido.appendChild(descripcion);
})
*/


const seccionExperiencia = document.getElementById("lista-experiencia");
const fragmentExperience = document.createDocumentFragment(); //Objeto ligero del DOM y sirve como contenedor temporal de nodos

experience.forEach(experiencia => {
    const contenedorItem = document.createElement("div");
    contenedorItem.classList.add("linea-tiempo__item");
    contenedorItem.setAttribute("role", "listitem");

    const itemCirculo = document.createElement("span");
    itemCirculo.classList.add("item__circulo");
    itemCirculo.setAttribute("aria-hidden", "true");

    const itemContenido = document.createElement("div");
    itemContenido.classList.add("item__content");

    const aboutcompany = document.createElement("div");
    aboutcompany.classList.add("content__about-experience");

    const role = document.createElement("h3");
    role.textContent = experiencia.puesto;
    role.classList.add("about-experience__rol");

    const nameCompany = document.createElement("h4");
    nameCompany.textContent = experiencia.empresa;
    nameCompany.classList.add("about-experience__name-company");

    const period = document.createElement("h5");
    period.textContent = experiencia.periodo;
    period.classList.add("about-experience__period");

    const pictureCompany = document.createElement("img");
    pictureCompany.src = experiencia.imagen;
    pictureCompany.alt = `Logo de ${experiencia.empresa}`;
    pictureCompany.classList.add("about-experience__picture-company");
    pictureCompany.loading = "lazy";

    const ul = document.createElement("ul");
    ul.classList.add("content__list")
    ul.setAttribute("aria-label", `Tareas en ${experiencia.empresa}`);
    experiencia.tareas.forEach(item => {
        li = document.createElement("li");
        li.classList.add("list__item");
        li.textContent = item;
        ul.append(li);
    })

    aboutcompany.append(role, nameCompany, period, pictureCompany);
    contenedorItem.append(itemCirculo, itemContenido)
    itemContenido.append(aboutcompany, ul);

    fragmentExperience.appendChild(contenedorItem);
})
seccionExperiencia.appendChild(fragmentExperience);


const contenedorProyectos = document.getElementById("section-proyects");
const fragmentProyects = document.createDocumentFragment(); //Objeto ligero del DOM y sirve como contenedor temporal de nodos

proyectos.forEach((proyecto, index) => {

    //Creamos elemento card
    const card = document.createElement("article");
    card.classList.add("proyects-card");

    //Contenedor de foto del proyecto
    const containerPicture = document.createElement("div");
    containerPicture.classList.add("proyects-card__container-picture");

    const pictureProyect = document.createElement("img");
    pictureProyect.classList.add("proyects-card__picture");
    pictureProyect.src = proyecto.imagen;
    pictureProyect.alt = `Captura de pantalla del proyecto: ${proyecto.titulo}`;
    pictureProyect.dataset.index = index;
    pictureProyect.loading = "lazy";
    containerPicture.append(pictureProyect);


    //Contenedor de informacion sobre el proyecto
    const aboutProyect = document.createElement("div");
    aboutProyect.classList.add("proyects-card__about-proyect");

    //Creamos el titulo para cada proyecto
    const h3 = document.createElement("h3");
    h3.classList.add("proyects-card__title");
    h3.textContent = proyecto.titulo;

    //Creamos la descripción para cada proyecto
    const p = document.createElement("p");
    p.innerHTML = proyecto.descripcion; //con innerHTMl lo leemos como html
    p.classList.add("proyects-card__description"); //Añadimos la clase subtitle al p

    //Creamos contenenedor de tecnologias usadas en el proyecto
    const divTech = document.createElement("div");
    divTech.classList.add("proyects-card__technologies");
    divTech.setAttribute("aria-label", "Tecnologías utilizadas");

    //Botón de github

    const SVG_NS = "http://www.w3.org/2000/svg";

    const link = document.createElement("a");
    link.classList.add("proyects-card__button");
    link.href = proyecto.link;
    link.target = "_blank";
    link.rel = "noopener noreferrer";
    link.setAttribute("aria-label", `Ver código de ${proyecto.titulo} en GitHub`);
    
    const svg = document.createElementNS(SVG_NS, "svg");
    svg.classList.add("proyects-card__icon");
    svg.setAttribute("viewBox", "0 0 24 24");
    svg.setAttribute("width", "20");
    svg.setAttribute("height", "20");
    svg.setAttribute("aria-hidden", "true");
    svg.setAttribute("focusable", "false");

    // Path
    const path = document.createElementNS(SVG_NS, "path");
    path.classList.add("proyects-card__icon-path")
    path.setAttribute(
        "d",
        "M12 0.3c-6.6 0-12 5.4-12 12 0 5.3 3.4 9.8 8.2 11.4.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.8 1.3 1.3 1.3 1.1 1.8 2.9 1.3 3.6 1 .1-.8.4-1.3.7-1.6-2.6-.3-5.3-1.3-5.3-5.9 0-1.3.5-2.3 1.2-3.1-.1-.3-.5-1.5.1-3.1 0 0 1-.3 3.2 1.2.9-.3 1.9-.4 2.9-.4s2 .1 2.9.4c2.2-1.5 3.2-1.2 3.2-1.2.6 1.6.2 2.8.1 3.1.8.8 1.2 1.9 1.2 3.1 0 4.6-2.7 5.6-5.3 5.9.4.4.8 1.1.8 2.2v3.3c0 .3.2.7.8.6 4.8-1.6 8.2-6.1 8.2-11.4 0-6.6-5.4-12-12-12z"
    );


    const text = document.createElement("span");
    text.classList.add("proyects_card__text");
    text.textContent = "Código";


    //Recorremos tecnologías y creamos su elemento img
    proyecto.tecnologias.forEach(tecnologia => {

        const chip = document.createElement("div");
        chip.classList.add("proyects-card__chip");
        chip.setAttribute("role", "img");
        chip.setAttribute("aria-label", tecnologia.nombre);


        const img = document.createElement("img");
        img.src = tecnologia.url;
        img.alt = tecnologia.alt;
        img.classList.add("proyects-card__chip-picture");
        img.loading = "lazy";

        const nameTechnology = document.createElement("h6");
        nameTechnology.textContent = tecnologia.nombre;
        nameTechnology.classList.add("proyects-card__chip-name");
        chip.append(img, nameTechnology);
        divTech.append(chip);
    })


    link.append(svg, text);
    svg.appendChild(path);
    if(proyecto.link.length > 0){
        aboutProyect.append(h3, divTech, p, link);
    }else{
        aboutProyect.append(h3, divTech, p);
    }
    
    card.append(containerPicture, aboutProyect);

    //Añadimos separador
    const separation = document.createElement("hr");
    separation.classList.add("section-proyects__separation");
    //Añadimos el proyecto y separador 
    if( index < proyectos.length -1) {
        fragmentProyects.append(card, separation);
    }else{
        fragmentProyects.append(card);
    }
});

contenedorProyectos.appendChild(fragmentProyects);

/*################################################*/


//variables para modal
const modal = document.getElementById("modal");
const imagenGrande = document.getElementById("imagenGrande");
const miniaturas = document.querySelector(".modal__carousel");
const cerrar = document.getElementById("buttonClose");


function abrirModalProyecto(index) {
    const proyecto = proyectos[index];
    imagenGrande.src = proyecto.capturas[0];

    // Limpiamos contenido previo
    const oldViewport = miniaturas.querySelector('.carousel__viewport');
    if (oldViewport) oldViewport.remove();

    const carouselViewport = document.createElement("div");
    carouselViewport.classList.add("carousel__viewport");

    const carouselTrack = document.createElement("ul");
    carouselTrack.classList.add("carousel__track");

    proyecto.capturas.forEach((src, i) => {
        const carouselSlide = document.createElement("li");
        carouselSlide.classList.add("carousel__slide");

        const img = document.createElement("img");
        img.src = src;
        img.alt = `Captura de pantalla ${i + 1} de ${proyecto.titulo}`;
        img.classList.add("carousel__picture");
        img.loading = "lazy";
        if (i === 0) img.classList.add("carousel__picture--active");

        img.addEventListener("click", () => {
            imagenGrande.src = src;
            imagenGrande.alt = `Captura de pantalla ${i + 1} de ${proyecto.titulo}`;
            marcarActiva(i);
            miniaturas.centerTo(i); // Centra la miniatura al hacer click
        });

        carouselSlide.appendChild(img);
        carouselTrack.appendChild(carouselSlide);
    });

    carouselViewport.append(carouselTrack);
    miniaturas.append(carouselViewport);

    initCarousel(miniaturas);
    modal.showModal();
    document.body.style.overflow = "hidden";
}

function marcarActiva(index) {
    const todas = document.querySelectorAll(".carousel__picture");
    todas.forEach((img, i) => {
        img.classList.toggle("carousel__picture--active", i === index);
    });
}

// Abrir modal
document.querySelectorAll(".proyects-card__picture").forEach(img => {
    img.addEventListener("click", () => {
        const index = Number(img.dataset.index);
        abrirModalProyecto(index);
    });
});

// Cerrar modal
cerrar.addEventListener("click", () => {
    modal.close();
    document.body.style.overflow = "auto";
});


//funcion para carrusel
function initCarousel(container) {
    const track = container.querySelector('.carousel__track');
    const viewport = container.querySelector('.carousel__viewport');
    const prevBtn = container.querySelector('.carousel__btn--prev');
    const nextBtn = container.querySelector('.carousel__btn--next');

    let currentIndex = 0;
    const slides = track.children;

    function centerTo(index) {
        if (index < 0 || index >= slides.length) return;

        currentIndex = index;
        const slide = slides[index];

        // Cálculo matemático para centrar el slide en el viewport
        const extraGap = 12 * index; // gap entre slides
        const slideOffset = slide.offsetLeft;
        const viewportWidth = viewport.offsetWidth;
        const slideWidth = slide.offsetWidth;

        const scrollAmount = slideOffset - (viewportWidth / 2) + (slideWidth / 2);

        // Limitar el scroll para que no muestre espacio vacío
        const maxScroll = track.scrollWidth - viewportWidth;
        const finalScroll = Math.max(0, Math.min(scrollAmount, maxScroll));

        track.style.transform = `translateX(-${finalScroll}px)`;
    }

    // Eventos de flechas
    prevBtn.onclick = () => {
        if (currentIndex > 0) {
            currentIndex--;
            const newSrc = slides[currentIndex].querySelector('img').src;
            imagenGrande.src = newSrc;
            marcarActiva(currentIndex);
            centerTo(currentIndex);
        }
    };

    nextBtn.onclick = () => {
        if (currentIndex < slides.length - 1) {
            currentIndex++;
            const newSrc = slides[currentIndex].querySelector('img').src;
            imagenGrande.src = newSrc;
            marcarActiva(currentIndex);
            centerTo(currentIndex);
        }
    };

    // Exponer la función para que sea accesible desde afuera
    container.centerTo = centerTo;
    centerTo(0);
}


/* ####################################### */
/*Navbar */
/* ####################################### */


const menuToggle = document.getElementById('mobile-menu');
const navList = document.getElementById('nav-list');
const navLinks = document.querySelectorAll('.navbar__link');

// Función para cerrar el menú
const closeMenu = () => {
    menuToggle.classList.remove('is-active');
    navList.classList.remove('is-active');
    menuToggle.setAttribute('aria-expanded', 'false');
    document.body.style.overflow = 'auto'; // Habilitar scroll de nuevo
};

// 1. Abrir/Cerrar menú
menuToggle.addEventListener('click', () => {
    const isOpened = menuToggle.getAttribute('aria-expanded') === 'true';

    menuToggle.setAttribute('aria-expanded', !isOpened);
    menuToggle.classList.toggle('is-active');
    navList.classList.toggle('is-active');

    // Bloquear scroll cuando el menú está abierto
    document.body.style.overflow = isOpened ? 'auto' : 'hidden';
});

// 2. Cerrar al hacer clic en un link
navLinks.forEach(link => {
    link.addEventListener('click', closeMenu);
});

// 3. Cerrar al redimensionar
window.addEventListener('resize', () => {
    if (window.innerWidth > 768) {
        closeMenu();
    }
});

/*###################################### */
/*Animacion de scrool */
/*###################################### */

function createObserver(selector, className, options = {}) {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add(className);
            } else {
                entry.target.classList.remove(className);
            }
        })
    }, options);

    document
        .querySelectorAll(selector)
        .forEach(element => observer.observe(element));
}

createObserver(".proyects-card", "proyects-card--opacity");
createObserver(".item__content", "item__content--translate");
createObserver(".skill-card", "skill-card--scale");
createObserver(".section__description", "section__description--translate");
createObserver(".banner", "banner--opacity");